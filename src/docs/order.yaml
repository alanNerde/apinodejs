#tag para identificar o conjunto de endpoints relacionados a essa tag na ui do swagger

tags:
  - name: Order
    description: Operações relacionadas as vendas

paths:
  /order:
    get:
      tags: [Order]
      summary: Lista todos as vendas s/ itens
      description:
      responses:
        "200":
          description: A list of orders
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/OrderWithId"

    post:
      tags: [Order]
      summary: Adiciona nova venda c/ seus itens
      description: ''
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Order"
      responses:
        "200":
          description: Venda criada com sucesso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrderWithItens"

  /order/{id}:
    get:
      tags: [Order]
      summary: Lista as orders sem os itens
      responses:
        "200":
          description: Lista de uma order
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrderWithId"
    put:
      tags: [Order]
      summary: Atualiza Order
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OrderWithId"
      responses:
        "200":
          description: Order atualizada com sucesso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrderWithId"

components:
  schemas:
    Order:
      type: object
      properties:
        date:
          type: string
          pattern: '^\d{4}-\d{2}-\d{2}$'
          example: yyyy-mm-dd
        status:
          type: string
          enum: ['A', 'I']
          example: 'A'
        customer:
          type: integer
          example: 2
        address:
          type: integer
          example: 4
      required:
        - date
        - status
        - customer
        - address
    OrderWithId:
      type: object
      properties:
        id:
          type: integer
          example: 23
        date:
          type: string
          pattern: '^\d{4}-\d{2}-\d{2}$'
          example: yyyy-mm-dd
        customer:
          type: integer
          example: 2
        address:
          type: integer
          example: 4
        status:
          type: string
          enum: ['A', 'I']
          example: 'A'
    OrderWithItens:
      allOf:
        - $ref: "#/components/schemas/OrderWithId"
        - type: object
          properties:
            itens:
              type: array
              items:
                type: object
                properties:
                  product:
                    type: integer
                    example: 3
                  amount:
                    type: integer
                    example: 20
                  unit_price:
                    type: number
                    example: 188.99
                  status:
                    type: string
                    enum: ['A', 'I']
